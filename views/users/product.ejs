
<%-include('../users/layouts/header.ejs') %>
<%-include('../users/layouts/navBar.ejs') %>


    <!--================Home Banner Area =================-->
    <!-- breadcrumb start-->
    <div class="hero">
        <div class="container">
            <div class="row justify-content-between">
                <div class="col-lg-5">
                    <div class="intro-excerpt">
                        <h1>Shop</h1>
                    </div>
                </div>
                <div class="col-lg-7">
                    
                </div>
            </div>
        </div>
    </div>
    <!-- breadcrumb start-->

    <!--================Category Product Area =================-->
    <section class="cat_product_area section_padding">
        <div class="container">
            <div class="row">
                <div class="col-lg-3">
                    <div class="left_sidebar_area">
                        <aside class="left_widgets p_filter_widgets">
                            <div class="l_w_title">
                                <h3>Browse Categories</h3>
                            </div>
                            <div class="widgets_inner">
                                <ul class="list">
                                    <%catData.forEach((cat)=>{%>
                                    <li>
                                        <% if(category==cat._id) { %>
                                            <a href="?category=<%=cat._id%>&sortValue=<%=sortValue%>&brand=<%=brand%>&minPrice=<%=minPrice%>&maxPrice=<%=maxPrice%>&search=<%=search%>"
                                                style="color:#f44072;">
                                                <%=cat.name %>
                                            </a>
                                            <% } else { %>
                                            <a href="?category=<%=cat._id%>&sortValue=<%=sortValue%>&brand=<%=brand%>&minPrice=<%=minPrice%>&maxPrice=<%=maxPrice%>&search=<%=search%>"
                                                style="color: #636363;">
                                                <%=cat.name %>
                                            </a>
                                            <% } %>
                                        </li>
                                        <% })%>
                                    
                                </ul>
                            </div>
                        </aside>

                        <aside class="left_widgets p_filter_widgets">
                            <div class="l_w_title">
                                <h3>Brand</h3>
                            </div>
                            <div class="widgets_inner">
                                <ul class="list">
                                    <% brands.forEach((brand) => { %>
                                    <li>
                                        <% if(brand == brand._id) { %>
                                            <a href="?brand=<%= brand._id %>&sortValue=<%= sortValue %>&category=<%= category %>&minPrice=<%= minPrice %>&maxPrice=<%= maxPrice %>&search=<%= search %>" style="color: #f44072;">
                                                <%= brand._id %>
                                            </a>
                                        <% } else { %>
                                            <a href="?brand=<%= brand._id %>&sortValue=<%= sortValue %>&category=<%= category %>&minPrice=<%= minPrice %>&maxPrice=<%= maxPrice %>&search=<%= search %>" style="color: #636363;">
                                                <%= brand._id %>
                                            </a>
                                        <% } %>
                                    </li>
                                <% }) %>
                                </ul>
                            </div>
                        </aside>

                        <aside class="left_widgets p_filter_widgets">
                            <div class="l_w_title">
                                <h3>Color Filter</h3>
                            </div>
                            <div class="l_w_title">
                                <h3>Price Filters</h3>
                                <ul>
                                    <li class="p-b-6">
                                        <!-- Price filter options -->
                                        <% if(maxPrice==499){ %>
                                        <p><a href="?minPrice=0&maxPrice=499&sortValue=<%=sortValue%>&category=<%=category%>&brand=<%=brand%>&search=<%=search%>"
                                                style="color:#f44072;">₹0 - ₹499</a></p>
                                        <% }else{ %>
                                        <p><a href="?minPrice=0&maxPrice=499&sortValue=<%=sortValue%>&category=<%=category%>&brand=<%=brand%>&search=<%=search%>"
                                                style="color: #636363;">₹0 - ₹499</a></p>
                                        <% } %>
                                <% if(maxPrice==999){ %>
                                <p><a href="?minPrice=500&maxPrice=999&sortValue=<%=sortValue%>&category=<%=category%>&brand=<%=brand%>&search=<%=search%>"
                                        style="color:#f44072;">₹500 - ₹999</a>
                                </p>
                                <% }else{ %>
                                <p><a href="?minPrice=500&maxPrice=999&sortValue=<%=sortValue%>&category=<%=category%>&brand=<%=brand%>&search=<%=search%>"
                                        style="color: #636363;">₹500 - ₹999</a>
                                </p>
                                <% } %>
                                <% if(maxPrice==1999){ %>
                                <p><a href="?minPrice=1000&maxPrice=1999&sortValue=<%=sortValue%>&category=<%=category%>&brand=<%=brand%>&search=<%=search%>"
                                        style="color:#f44072;">₹1000 - ₹1999</a></p>
                                <% }else{ %>
                                <p><a href="?minPrice=1000&maxPrice=1999&sortValue=<%=sortValue%>&category=<%=category%>&brand=<%=brand%>&search=<%=search%>"
                                        style="color: #636363;">₹1000 - ₹1999</a></p>
                                <% } %>
                                <% if(maxPrice==4999){ %>
                                <p><a href="?minPrice=2000&maxPrice=4999&sortValue=<%=sortValue%>&category=<%=category%>&brand=<%=brand%>&search=<%=search%>"
                                        style="color:#f44072;">₹2000 - ₹4999</a></p>
                                <% }else{ %>
                                <p><a href="?minPrice=2000&maxPrice=4999&sortValue=<%=sortValue%>&category=<%=category%>&brand=<%=brand%>&search=<%=search%>"
                                        style="color: #636363;">₹2000 - ₹4999</a></p>
                                <% } %>
                                <% if(minPrice==5000){ %>
                                <p><a href="?minPrice=5000&sortValue=<%=sortValue%>&category=<%=category%>&brand=<%=brand%>&search=<%=search%>"
                                        style="color:#f44072;">₹5000+</a>
                                </p>
                                <% }else{ %>
                                <p><a href="?minPrice=5000&sortValue=<%=sortValue%>&category=<%=category%>&brand=<%=brand%>&search=<%=search%>"
                                        style="color: #636363;">₹5000+</a>
                                </p>
                                <% } %>
                            </li>
                        </ul>
                    </div>
                        </aside>
                        <aside class="left_widgets p_filter_widgets">
                            <div class="l_w_title">
                                <h3> Sort:</h3>
        
                                <% if(sortValue&&sortValue==3) {%>
                                <a href="?sortValue=3&category=<%=category%>&brand=<%=brand%>&minPrice=<%=minPrice%>&maxPrice=<%=maxPrice%>&search=<%=search%>" class="flex-c-m stext-107 cl6 size-301 bor7 p-lr-15 hov-tag1 trans-04 m-r-5 m-b-5"
                                    style="color:#f44072;">
                                    Latest
                                </a><br>
                                <%}else{%>
                                    <a href="?sortValue=3&category=<%=category%>&brand=<%=brand%>&minPrice=<%=minPrice%>&maxPrice=<%=maxPrice%>&search=<%=search%>" class="flex-c-m stext-107 cl6 size-301 bor7 p-lr-15 hov-tag1 trans-04 m-r-5 m-b-5"
                                        style="color: #636363;">
                                        Latest
                                    </a><br>
                
                                <%}%>
                                <% if(sortValue&&sortValue==2) {%>
                                <a href="?sortValue=2&category=<%=category%>&brand=<%=brand%>&minPrice=<%=minPrice%>&maxPrice=<%=maxPrice%>&search=<%=search%>" class="flex-c-m stext-107 cl6 size-301 bor7 p-lr-15 hov-tag1 trans-04 m-r-5 m-b-5">
                                    Price Low to High
                                </a><br>
                                <%}else{%>
                                    <a href="?sortValue=2&category=<%=category%>&brand=<%=brand%>&minPrice=<%=minPrice%>&maxPrice=<%=maxPrice%>&search=<%=search%>" class="flex-c-m stext-107 cl6 size-301 bor7 p-lr-15 hov-tag1 trans-04 m-r-5 m-b-5"
                                        style="color: #636363;">
                                        Price Low to High
                                    </a><br>
                
                               <% }%>
                               <% if(sortValue&&sortValue==1) {%>
                                <a href="?sortValue=1&category=<%=category%>&brand=<%=brand%>&minPrice=<%=minPrice%>&maxPrice=<%=maxPrice%>&search=<%=search%>" class="flex-c-m stext-107 cl6 size-301 bor7 p-lr-15 hov-tag1 trans-04 m-r-5 m-b-5">
                                    Price High to Low
                                </a><br>
                            <%}else{%>
                                <a href="?sortValue=1&category=<%=category%>&brand=<%=brand%>&minPrice=<%=minPrice%>&maxPrice=<%=maxPrice%>&search=<%=search%>" class="flex-c-m stext-107 cl6 size-301 bor7 p-lr-15 hov-tag1 trans-04 m-r-5 m-b-5"
                                    style="color: #636363;">
                                    Price High to Low
                                </a><br>
                           <% }%>
                
                                
                        </div>
                    
                           
                    </aside>
                    </div>
                </div>
                <div class="col-lg-9">
                    <div class="row">
                        <div class="col-lg-12">
                            <div class="product_top_bar d-flex justify-content-between align-items-center">
                                <div class="single_product_menu d-flex">
                                    <div class="dis-none panel-search w-full p-t-10 p-b-10" id="search-prdct">
                                        <form class="d-flex" role="search">
                                            <!-- Input field for search -->
                                            <input class="form-control me-2 w-100 " type="search" placeholder="Search" name="search" aria-label="Search" style="background-color:#bae9e6;color:rgb(1, 1, 2)" value="<%=search%>">
                                        </form>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="row align-items-center latest_product_inner">
                        <% if (product) { %>
                            <% for (let i = 0; i < product.length; i++) { %>
                        <div class="col-lg-4 col-sm-6">
                            <% if(product[i].offer ) { %>
                                <div class="discount-badge"style="background-color: #ff5733; color: #f8f8f8; padding: 5px; position: absolute; z-index: 1; width: 74px;">
                                    <span class="stext-103 size-102">
                                        <%= product[i].offer.discount %> % OFF
                                    </span>
                                </div>
                                <% } %>
                                <a class="product-item" href="/productDetails/<%= product[i]._id %>">
                            <div class="single_product_item">
                                <img src="/static/adminAssets/images/products/<%= product[i].images[0] %>" alt="<%= product[i].images[0] %>" class="img-fluid product-thumbnail">
                                <div class="single_product_text">
                                    <h4><%= product[i].productName %></h4>
                                    <% if(product[i].offer && product[i].offer.discount > 0) { %>
                                    <h3>₹ <%= product[i].price %></h3>
                                    <span class="stext-105 cl3" style="margin-left: 130px;">
                                        <p class="text-danger">₹ <%= product[i].discountedPrice %></p>
                                    </span> 
                                    <% } else { %>
                                        <span class="stext-105 cl3">₹ <%= product[i].price %></span>
                                    <% } %>
                                    <a href="#" class="add_cart">+ add to cart<i class="ti-heart"></i></a>
                                </div>
                            </div>
                            </a>
                        </div>
                        <% } %>
                        <% } else { %>
                            <p>No products found.</p>
                        <% } %>
                        <div class="col-lg-12">
                            <div class="pageination">
                                <nav aria-label="Page navigation example">
                                    <ul class="pagination justify-content-center">
                                        <li class="page-item">
                                            <a class="page-link" href="#" aria-label="Previous">
                                                <i class="ti-angle-double-left"></i>
                                            </a>
                                        </li>
                                        <li class="page-item"><a class="page-link" href="#">1</a></li>
                                        <li class="page-item"><a class="page-link" href="#">2</a></li>
                                        <li class="page-item"><a class="page-link" href="#">3</a></li>
                                        <li class="page-item"><a class="page-link" href="#">4</a></li>
                                        <li class="page-item"><a class="page-link" href="#">5</a></li>
                                        <li class="page-item"><a class="page-link" href="#">6</a></li>
                                        <li class="page-item">
                                            <a class="page-link" href="#" aria-label="Next">
                                                <i class="ti-angle-double-right"></i>
                                            </a>
                                        </li>
                                    </ul>
                                </nav>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>
    <!--================End Category Product Area =================-->



    <%-include('../users/layouts/footer.ejs') %>